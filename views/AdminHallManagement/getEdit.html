{% extends "_global/index.html" %}

{% block main %}
<div>
<form class="halls-form col-12 col-sm-10 col-md-8 col-lg-6 col-xl-6" method="POST" enctype="multipart/form-data" onsubmit="return validateHallEditForm();">
    <div class="card">
            <div class="card-header">
                    Edit a Hall
            </div>
            <div class="card-body">
    <div class="form-group">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required class="form-control" value="{{ hall.name|escape }}">
    </div>
    <div class="form-group">
        <label for="description">Description:</label>
        <input type="text" id="description" name="description" required class="form-control" value="{{ hall.description|escape }}">
    </div>
    <div class="form-group">
        <label for="image">Edit the existing image (optional)</label>
        <input type="file" id="image" name="image" class="form-control" accept="image/jpeg">
    </div>
    </div>
        <div class="card-footer">
                <button type="submit" class="btn btn-primary">
                    Edit Hall
                </button>
            </div> 
        
            <div class="back text-center">
                    <a href="{{ BASE }}administrator/halls">Back to Profile screen</a>
            </div> 
    </div>
    <div class="alert alert-warning d-none" id="error-message"></div>
    
</form>

    <script>
        function validateHallEditForm(){
            let status = true;

            document.querySelector("#error-message").classList.add("d-none");
            document.querySelector("#error-message").innerHTML = "";

            const name = document.querySelector("#name").value;
            if(!name.match(/.*[^\s]{3,}.*/)){
                document.querySelector("#error-message").innerHTML += "The name must contain at least 3 characters!<br>";
                document.querySelector("#error-message").classList.remove("d-none");
                status = false;
            }

            const description = document.querySelector("#description").value;
            if(!description.match(/.*[^\s]{5,}.*/)){
                document.querySelector("#error-message").innerHTML += "The description must contain at least 5 characters!<br>";
                document.querySelector("#error-message").classList.remove("d-none");
                status = false;
            }

            return status;
        }
    </script>

</div>
{% endblock %}